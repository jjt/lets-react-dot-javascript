<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Let's React Dot Javascript</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

      <section class="center">
        <h1>Let's React dot Javascript!</h1>
        By Jonathan Taylor Thomas
        <pre style="display:none"><code>Needless pre/code block for highlight.js... wheee!!</code></pre>
      </section>



      <section data-markdown>
        <script type="text/template">
## React is...
<ul>
<li>An open-source JS library for building UIs</li>
<li class="fragment">Used as the V in MV* (standalone or with other frameworks)</li>
<li class="fragment">Made by Facebook and used in production</li>
<li class="fragment">Compatible down to IE8</li>
<li class="fragment">15,500 GH stars, nearly 300 contributors</li>
</ul>

<span class="fragment"><strong>
But! it is not a framework (Angular, Ember, etc)
</strong></span>
        </script>
      </section>



      <section data-markdown>
        <script type="text/template">
## Why React?
<ul>
<li> React components are easy to reason about</li>
<li class="fragment">  Makes data flow and application state explicit </li>
<li class="fragment"> Makes efficient rendering an implementation detail </li>
<li class="fragment"> Conceptually simple, less time spent learning framework/lib</li>
<li class="fragment"> Plays well with immutable data structures</li>
<li class="fragment"> Server-side rendering (isomorphic applications) </li>
</ul>
        </script>
      </section>

      <section data-markdown>
        <script type="text/template">
# React Components
The building blocks of React applications
        </script>
      </section>



      <section data-markdown>
        <script type="text/template">
## About components
* Components ecapsulate data, behaviour, and markup
<li class="fragment"> Component data is _properties_ and _state_</li>
<li class="fragment"> Whenever _props_ or _state_ change, component(s) re-render</li>
* Efficient renders due to virtual DOM + diffing <!-- .element: class="fragment" -->
* Nestable, composable <!-- .element: class="fragment" -->


        </script>
      </section>





      <section data-markdown>
        <script type="text/template">
## A simple React component
A minimal component simply implements a `render` method:
```js
var SimpleComponent = React.createClass({
  render: function() {
    return <div>I'm a simple component</div>;
  }
});

React.render(<SimpleComponent/>, $("#app"));
```

This will render the following markup into `#app`:
```
<div>I'm a simple component</div>
```

There's more to React components, but first... <!-- .element: class="fragment" -->
        </script>
      </section>



      <section data-markdown class=center>
        <script type="text/template">
#MARKUP IN JS?!?!?!???
![](http://i.imgur.com/WB7I8I3.jpg)
        </script>
      </section>



      <section data-markdown>
        <script type="text/template">
## JSX: Javascript + HTML
Extends JS with an HTML-like syntax and gets compiled from this:

```js
var SimpleComponent = React.createClass({
  render: function() {
    return <div>I'm a simple component</div>;
  }
});
React.render(<SimpleComponent/>, $("#app"));
```

Into pure JS:

```js
var SimpleComponent = React.createClass({
  displayName: "SimpleComponent",
  render: function() {
    return React.createElement("div", null, "I'm a simple component");
  }
});
React.render(React.createElement(SimpleComponent, {},), $("#app"));
```

        </script>
      </section>



      <section data-markdown>
        <script type="text/template">
## Advantages of using JSX

* Near-identical to HTML (familiarity, matches rendered output)
<li class="fragment" data-fragment-index=1> Less verbose/clunky syntax
<li class="fragment" data-fragment-index=3> Takes care of boilerplate (ex. `React.createElement` calls)</li>
<li class="fragment" data-fragment-index=5> [CJSX](https://github.com/jsdf/coffee-react) for JSX + CoffeeScript, or [6to5](https://github.com/6to5/6to5) for JSX + ES6</li>

<p class="fragment" data-fragment-index=10>
  __Disadvantages__: Looks weird, needs compilation - not problems in practice
</p>

<p class="fragment" data-fragment-index=10>[More info on JSX](http://facebook.github.io/react/docs/jsx-in-depth.html), and some [gotchas](http://facebook.github.io/react/docs/jsx-gotchas.html)</p>
        </script>
      </section>



      <section data-markdown>
        <script type="text/template">
# Back to Components
We're going to keep using JSX
        </script>
      </section>






      <section data-markdown>
        <script type="text/template">
##Component lifecycle methods
Called at certain points, useful as hooks ([more info here](http://facebook.github.io/react/docs/component-specs.html))

<div class="fragment">
Initial mounting of a component (called in order):
<pre><code class="js hljs">getDefaultProps     // Default props, return as obj
getInitialState     // Initial state, return as obj - can access this.props here
componentWillMount  // Before initial render
render              // Initial render
componentDidMount   // After initial render (ex. init jQuery plugin)</code></pre>
</div>

<div class="fragment">
On change of _props_ or _state_ (called in order):
<pre><code class="js hljs">componentWillReceiveProps(obj nextProps)             // Only if props change
shouldComponentUpdate(obj nextProps, obj nextState)  // Return false to abort re-render
componentWillUpdate(obj nextProps, obj nextState)    // Do things right before re-render
render                                               // Re-render component
componentDidUpdate(obj prevProps, obj prevState)     // Re-trigger any DOM code (jQ plugs)
</code></pre>
</div>

<div class="fragment">
When component leaves the DOM, `componentWillUnmount` is called
</div>
        </script>
      </section>







      <section data-markdown>
        <script type="text/template">
## Component properties

Component _properties_ are passed in like HTML attributes, should be treated
as immutable after component instantiation

```
var Person = React.createClass({
  render: function() {
    return <div>{this.props.greeting} My name is {this.props.name}</div>;
  }
});

React.render(<Person name="Bertie" greeting="Hullo!"/>, $("#app"));
```
Renders:
```html
<div>Hullo! My name is Bertie</div>
```
        </script>
      </section>




      <section data-markdown>
        <script type="text/template">
## Default properties
Define `getDefaultProps` method that returns an object
```
var Person = React.createClass({
  getDefaultProps: function() {
    return { greeting: "Hi." };
  },
  render: function() {
    return <div>{this.props.greeting} My name is {this.props.name}</div>;
  }
});

React.render(<Person name="Defaultio"/>, $("#app"));
```
Renders:
```html
<div>Hi. My name is Defaultio</div>
```
        </script>
      </section>




      <section data-markdown>
        <script type="text/template">
## Property validation
React offers development-time property checks ([lots of them](http://facebook.github.io/react/docs/reusable-components.html#prop-validation))
```js
Person = React.createClass({
  propTypes: {
    name: React.PropTypes.string.isRequired, //Required
    greeting: React.PropTypes.string //Optional
  },
  //...
});

React.render(<Person/>, $("#app"));
React.render(<Person name={true}/>, $("#app"));
```
Console log:
```
Warning: Required prop `name` was not specified in `Person`.
Warning: Invalid prop `name` of type `boolean` supplied to `Person`, expected `string`.
```
        </script>
      </section>




      <section data-markdown>
        <script type="text/template">
## Component state
Mutable data, should only be modified by component itself
```js
var PersonWithStomach = React.createClass({
  getInitialState: function() {
    return: {
      isHungry: true
    }
  },
  render: function() {
    return <div>
              My name is {this.props.name} and I
              { this.state.isHungry ? "would love some food" : "am full, thanks" }
            </div>;
    }
});

React.render(<PersonWithStomach name="Bertie"/>, $("#app"));
```
Renders:
```html
<div>My name is Bertie, and I would love some food</div>
```

        </script>
      </section>








      <section data-markdown>
        <script type="text/template">
## Component state (cont)
Can access properties in `getInitialState`, but often an anti-pattern and should 
do so sparingly and explicitly just to set initial state
```js
var PersonWithStomach = React.createClass({
  getInitialState: function() {
    return: {
      isHungry: this.props.isHungryInitial ? true : false
    }
  },
  render: function() { /* see previous */ }
});

React.render(<PersonWithStomach name="Bertie" isHungryInitial={false}/>, $("#app"));
```
Renders:
```html
<div>My name is Bertie and I am full, thanks</div>
```
        </script>
      </section>




      <section data-markdown>
        <script type="text/template">
## Mutating state
Use `this.setState(obj nextState)`

```js
var PersonWithStomach = React.createClass({
  getInitialState: function() { return {isHungry: this.isHungryInitial ? true : false} },
  handleClick: function() {
    this.setState({isHungry: !this.state.isHungry}); // Toggle isHungry
  },
  render: function () {
    return <div onClick={this.handleClick}>
             My name is {this.props.name} and I
             { this.state.isHungry ? "would love some food" : "am full, thanks" }
           </div>;
  }
});
React.render(<PersonWithStomach name="Bertie"/>, $("#app"));
```
Renders:
```html
<div>My name is Bertie and I would love some food</div>
<!-- after clicking on our component... -->
<div>My name is Bertie and I am full, thanks</div>
```

        </script>
      </section>









      <section data-markdown>
        <script type="text/template">
## More about events
* Synthetic event system that mirrors true DOM events (names, propagation, etc)
<li class="fragment">Auto-binds event handlers to `this`</li>
* Uses event delegation instead of attaching events to components <!-- .element: class="fragment" -->
        </script>
      </section>









      <section data-markdown>
        <script type="text/template">
## Props vs State
* Best to keep components stateless and pass things down as props
* Large React apps often use stateful wrapper components to track pieces of app state
and pass them as props into stateless components <!-- .element: class="fragment" -->
* Either getting new props or mutating state will automatically re-render <!-- .element: class="fragment" -->
* A component's props should be treated as immutable, state is mutable but only by
that component <!-- .element: class="fragment" -->
* Keep state where it makes sense (sometimes localised, sometimes at top app level) <!-- .element: class="fragment" -->
        </script>
      </section>



      <section data-markdown>
        <script type="text/template">
# Multiple Components
Because single-component applications are boring

        </script>
      </section>






      <section data-markdown>
        <script type="text/template">
## Nested components

Components can include other components explicitly
```
var Group = React.createClass({
  render: function() {
    return (
      <div>
        <Person name="Bertie" key="Bertie"/>
        <Person name="Jeeves" greeting="Sir?" key="Jeeves"/>
      </div>
    );
  }
});
React.render(<Group/>, $("#app"));
```
Renders:
```html
<div>
  <div>Hullo! My name is Bertie</div>
  <div>Sir? My name is Jeeves</div>
</div>
```
        </script>
      </section>






      <section data-markdown>
        <script type="text/template">
##Nested components (cont)
Or by creating an array of components
```js
var Group = React.createClass({
  getDefaultProps: function() { return {people: []} },
  render: function() {
    var peopleItems = this.props.people.map(function(personData) {
      return <Person {...personData} key={personData.name}/>;
    });
    return <div>{peopleItems}</div>;
  }
});

var people = [
  {name: "Bertie", greeting: "Hullo!"},
  {name: "Jeeves", greeting: "Sir?"}
];

React.render(<Group people={people} />, $("#app"));
```
Renders same as last slide
        </script>
      </section>








      <section data-markdown>
        <script type="text/template">
## Nested components (cont)
Components can also render their children (explicit or array):
```js
var Group = React.createClass({
  render: function() {
    return <div>{this.props.children}</div>;
  }
});

var people = [
  {name: "Bertie", greeting: "Hullo"},
  {name: "Jeeves", greeting: "Sir?"}
];

var peopleItems = people.map(function(personData) {
  return <Person {...personData} key={personData.name}/>;
});
React.render(<Group>{peopleItems}</Group>, $("#app"));
```
Renders same as last slide

        </script>
      </section>




      <section data-markdown>
        <script type="text/template">
## Component communication
For parent->child, pass props; for child->parent, pass a callback:
```js
var Group = React.createClass({
  handlePersonClick: function(name) {
    console.log(name + " was clicked");
  },
  render: function() {
    var peopleItems = this.props.people.map(function(personData) {
      return <Person
               {...personData}
               key={personData.name}
               onClick={this.handlePersonClick.bind(this, personData.name)}
             />;
    });

    return <div>{peopleItems}</div>;
  }
});

var people = [ /* same as last slide */ ];
React.render(<Group people={people} />, $("#app"));
```
        </script>
      </section>



      <section data-markdown>
        <script type="text/template">
# Mixins and React.addons
Extra junk and stuff

        </script>
      </section>







      <section data-markdown>
        <script type="text/template">
## Mixins
* Address cross-cutting concerns (show d3 graph from data)
* POJOs that components extend <!-- .element: class="fragment" -->
* If mixins implement lifecycle methods, they each get called in order <!-- .element: class="fragment" -->

<pre><code class="js hljs fragment">var LogComponentDidMount = {
  componentDidMount: function() {
    console.log(this.displayName + ' did mount');
  }
}

var ComponentWithMixin = React.createClass({
  mixins: [LogComponentDidMount],
  componentDidMount: function() { console.log("I mounted"); },
  // ...
});

React.render(&lt;ComponentWithMixin/&gt;, $("#app"));

// Console:
// "ComponentWithMixin did mount"
// "I mounted"
</code></pre>

        </script>
      </section>




      <section data-markdown>
        <script type="text/template">
## React.addons
<ul>
<li>
  [PureRenderMixin](http://facebook.github.io/react/docs/pure-render-mixin.html):
  Perf gain when `render` method is referentially transparent wrt.  props and state, which most components should be
</li>
<li class="fragment">
  [LinkedStateMixin](http://facebook.github.io/react/docs/two-way-binding-helpers.html):
  Links form element value to component state, can be passed through props to sync parent state with input value of child
</li>
<li class="fragment">
  [ClassSet](http://facebook.github.io/react/docs/class-name-manipulation.html):
  CSS class manipulation helper no string concatenation!
</li>
<li class="fragment">
  [And more](http://facebook.github.io/react/docs/addons.html)
  </li>

        </script>
      </section>


      <section data-markdown>
        <script type="text/template">
# Routing with React Router
De-facto routing solution, ported over from Ember's router

        </script>
      </section>




      <section data-markdown>
        <script type="text/template">
## Overview of React Router
* Nested routes match with handlers (React components)
* Transitions between routes
* Query params and dynamic segments


```js
// Define App, Inbox, InboxStats, Message, Calendar, and Dashboard components here

var routes = (
  <Route handler={App}>
    <Route name="inbox" handler={Inbox}>
      <Route name="message" path=":messageId" handler={Message}/>
      <DefaultRoute handler={InboxStats}/>
    </Route>
    <Route name="calendar" handler={Calendar}/>
    <DefaultRoute handler={Dashboard}/>
  </Route>
);

Router.run(routes, function (Handler) {
  React.render(<Handler/>, document.body);
});
```

More info on [Github](https://github.com/rackt/react-router/blob/master/docs/guides/overview.md),
and a [presentation from React.js Conf](https://www.youtube.com/watch?v=XZfvW1a8Xac). 

        </script>
      </section>







      <section data-markdown>
        <script type="text/template">
#React Native
Use React to write iOS apps with native UI components
        </script>
      </section>



      <section data-markdown>
        <script type="text/template">
## React Native Overview
* Runs React in JavaScriptCore with async bridge to main ObjC thread
* React components look the same but JSX targets iOS elements instead of DOM elements <!-- .element: class="fragment" -->
* Implements subset of CSS+Flexbox for layout/styles <!-- .element: class="fragment" -->
<li class="fragment">File watcher reloads app within a second 
  ([demo](https://www.youtube.com/watch?v=7rDsRXj9-cU&list=PLb0IAmt7-GS1cbw4qonlQztYV1TAW0sCr#t=1339))
</li>
<li class="fragment">
  Can use browser to run the JS, connect with simulator ([demo](https://www.youtube.com/watch?v=7rDsRXj9-cU&list=PLb0IAmt7-GS1cbw4qonlQztYV1TAW0sCr#t=399))
</li>
* Only iOS now, but Android planned <!-- .element: class="fragment" -->

<p class="fragment">
[Deep Dive into React Native](https://www.youtube.com/watch?v=7rDsRXj9-cU&list=PLb0IAmt7-GS1cbw4qonlQztYV1TAW0sCr&index=2) [video from React conf]  
[First Impressions using React Native](http://jlongster.com/First-Impressions-using-React-Native) [blog post]
</p>
        </script>
      </section>





			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
				progress: true,
				history: true,
				center: true,
        width: 1280,
        margin: 0.1,


				transition: 'slide', // none/fade/slide/convex/concave/zoom
        transitionSpeed: 'fast',

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
